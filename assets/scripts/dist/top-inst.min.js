!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document),$(document).ready(function(){var a=8,b=0,c=$(".loader-cntnr"),d=$(".js-res-loader"),e=$(".no-more-srch"),f=($(".js-no-res"),$(".footr")),g=!1,h=!0,i=!1,j="",k="",l="",m=function(b,f){c.fadeOut("fast"),$("select").prop("disabled",!1),f||$(".js-results").html(""),(b||[]).length<a&&(e.fadeIn(),h=!1);for(var i=0,j=(b||[]).length;j>i;i++){b[i].heroImg=b[i].heroImg?siteConfig.url.front+b[i].heroImg:"",b[i].heroImgThumb=b[i].heroImgThumb?siteConfig.url.front+b[i].heroImgThumb:"",b[i].profileImg=b[i].profileImg?siteConfig.url.front+b[i].profileImg:"",b[i].username=siteConfig.url.front+b[i].username,b[i].ratingType=l,Pluto.Templates.renderTemplate("card-inst",b[i],".js-results");var k=$(".srch-result-wrapper").last();k.length&&k.addClass("srch-res-prvw")}$("img.lazy").lazyload({effect:"fadeIn",placeholder:siteConfig.url.front+"assets/img/loading-tiny.gif",load:function(){$(this).removeClass("lazy")}}),g=!1,d.hide()},n=function(f){var n={};if(g||$("select").prop("disabled",!0),h=!0,g=!0,e.hide(),f?(i?i=!1:b+=a,d.fadeIn()):(b=0,c.show()),n.ratingType=j,n.examGroup=k,n.skip=b,n.limit=a,$("body").data("init"))$.post(siteConfig.url.front+"institute/topInstitute",JSON.stringify(n)).done(function(a){200===a.status&&m(JSON.parse(a.data),f)}).error(function(){console.log("An error occurred while fetching results")});else{var o=document.URL.split("/");j=o.pop(),k=o.pop(),$('select[data-type="rating-crtria"]').val(j),$('select[data-type="exam-grp"]').val(k),l=$('select[data-type="rating-crtria"] option:selected').data("type");var p=JSON.parse(inlineData||"[]");p.length<a&&(a=p.length),b=p.length,i=!0,m(p),$("body").data("init",!0)}};$(window).on("scroll",function(){if($(window).scrollTop()+$(window).height()>=$(document).height()-f.outerHeight(!0)){if(g||!h)return;n(!0)}}),$(".js-sort-combo").on("change",function(){j=$('select[data-type="rating-crtria"] option:selected').val(),k=$('select[data-type="exam-grp"] option:selected').val(),l=$('select[data-type="rating-crtria"] option:selected').data("type"),history.pushState(null,null,"../"+k+"/"+j),i=!1,n()}),$(window).on("popstate",function(){var a=document.URL.split("/");j=a.pop(),k=a.pop(),$('select[data-type="rating-crtria"]').val(j),$('select[data-type="exam-grp"]').val(k),l=$('select[data-type="rating-crtria"] option:selected').data("type"),i=!1,n()}),n()});