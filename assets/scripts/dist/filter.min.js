!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document),!function(a,b){"use strict";function c(){return b}"function"==typeof define&&define.amd?define("tinysort",c):a.tinysort=b}(this,function(){"use strict";function a(a,d){function h(){0===arguments.length?q({}):b(arguments,function(a){q(z(a)?{selector:a}:a)}),n=G.length}function q(a){var b=!!a.selector,d=b&&":"===a.selector[0],e=c(a||{},p);G.push(c({hasSelector:b,hasAttr:!(e.attr===g||""===e.attr),hasData:e.data!==g,hasFilter:d,sortReturnNumber:"asc"===e.order?1:-1},e))}function r(){b(a,function(a,b){B?B!==a.parentNode&&(H=!1):B=a.parentNode;var c=G[0],d=c.hasFilter,e=c.selector,f=!e||d&&a.matchesSelector(e)||e&&a.querySelector(e),g=f?E:F,h={elm:a,pos:b,posn:g.length};D.push(h),g.push(h)}),A=E.slice(0)}function s(){E.sort(t)}function t(a,c){var d=0;for(0!==o&&(o=0);0===d&&n>o;){var g=G[o],h=g.ignoreDashes?l:k;if(b(m,function(a){var b=a.prepare;b&&b(g)}),g.sortFunction)d=g.sortFunction(a,c);else if("rand"==g.order)d=Math.random()<.5?1:-1;else{var i=f,p=y(a,g),q=y(c,g),r=""===p||p===e,s=""===q||q===e;if(p===q)d=0;else if(g.emptyEnd&&(r||s))d=r&&s?0:r?1:-1;else{if(!g.forceStrings){var t=z(p)?p&&p.match(h):f,u=z(q)?q&&q.match(h):f;if(t&&u){var v=p.substr(0,p.length-t[0].length),w=q.substr(0,q.length-u[0].length);v==w&&(i=!f,p=j(t[0]),q=j(u[0]))}}d=p===e||q===e?0:q>p?-1:p>q?1:0}}b(m,function(a){var b=a.sort;b&&(d=b(g,i,p,q,d))}),d*=g.sortReturnNumber,0===d&&o++}return 0===d&&(d=a.pos>c.pos?1:-1),d}function u(){var a=E.length===D.length;if(H&&a)I?E.forEach(function(a,b){a.elm.style.order=b}):B.appendChild(v());else{var b=G[0],c=b.place,d="org"===c,e="start"===c,f="end"===c,g="first"===c,h="last"===c;if(d)E.forEach(w),E.forEach(function(a,b){x(A[b],a.elm)});else if(e||f){var i=A[e?0:A.length-1],j=i.elm.parentNode,k=e?j.firstChild:j.lastChild;k!==i.elm&&(i={elm:k}),w(i),f&&j.appendChild(i.ghost),x(i,v())}else if(g||h){var l=A[g?0:A.length-1];x(w(l),v())}}}function v(){return E.forEach(function(a){C.appendChild(a.elm)}),C}function w(a){var b=a.elm,c=i.createElement("div");return a.ghost=c,b.parentNode.insertBefore(c,b),a}function x(a,b){var c=a.ghost,d=c.parentNode;d.insertBefore(b,c),d.removeChild(c),delete a.ghost}function y(a,b){var c,d=a.elm;return b.selector&&(b.hasFilter?d.matchesSelector(b.selector)||(d=g):d=d.querySelector(b.selector)),b.hasAttr?c=d.getAttribute(b.attr):b.useVal?c=d.value||d.getAttribute("value"):b.hasData?c=d.getAttribute("data-"+b.data):d&&(c=d.textContent),z(c)&&(b.cases||(c=c.toLowerCase()),c=c.replace(/\s+/g," ")),c}function z(a){return"string"==typeof a}z(a)&&(a=i.querySelectorAll(a)),0===a.length&&console.warn("No elements to sort");var A,B,C=i.createDocumentFragment(),D=[],E=[],F=[],G=[],H=!0,I=a.length&&(d===e||d.useFlex!==!1)&&-1!==getComputedStyle(a[0].parentNode,null).display.indexOf("flex");return h.apply(g,Array.prototype.slice.call(arguments,1)),r(),s(),u(),E.map(function(a){return a.elm})}function b(a,b){for(var c,d=a.length,e=d;e--;)c=d-e-1,b(a[c],c)}function c(a,b,c){for(var d in b)(c||a[d]===e)&&(a[d]=b[d]);return a}function d(a,b,c){m.push({prepare:a,sort:b,sortBy:c})}var e,f=!1,g=null,h=window,i=h.document,j=parseFloat,k=/(-?\d+\.?\d*)\s*$/g,l=/(\d+\.?\d*)\s*$/g,m=[],n=0,o=0,p={selector:g,order:"asc",attr:g,data:g,useVal:f,place:"org",returns:f,cases:f,forceStrings:f,ignoreDashes:f,sortFunction:g,useFlex:f,emptyEnd:f};return h.Element&&function(a){a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]}}(Element.prototype),c(d,{loop:b}),c(a,{plugin:d,defaults:p})}()),$(document).ready(function(){var a=6,b=["Classroom program","Crash course","Correspondence course","Test series","Online course","Other"],c={},d=0,e=getParameterByName("type"),f="inst"===e?"institute":"crse"===e?"course":"",g="inst"===e?"card-inst":"card-crse",h=$(".loader-cntnr"),i=($(".js-srch-results"),$(".footr")),j=$(".no-more-srch"),k=$(".js-res-loader"),l=$(".fltr-overlay"),m=!1,n=!0;if(f){var o=function(a,b,c){for(var d=0,e=(b||[]).length;e>d;d++)if(a==b[d][c])return!0;return!1},p=function(a,b){for(var c=0,d=(a||[]).length;d>c;c++)if(b==a[c].examName)return c},q=function(a){var b=a.data("subjs");b&&(a.is(":checked")?$(b).slideDown("fast"):$(b).slideUp("fast",function(){$(b+" input").attr("checked",!1)}))},r=function(a){$("#dur-val").text(a.val())},s=function(a){var b=null,c=0,d=[],e=0;$(".srch-filters .cb").prop("checked",!1);for(var f in a)if(b=$('[data-fltr="'+f+'"]'),"city"===f||"instName"===f||"courseType"===f||"examSubjMap"===f)for(c=0,d=a[f]||[],e=d.length;e>c;c++){b.find('.cb[data-val="'+(d[c].examName||d[c])+'"]').prop("checked",!0),q(b.find('.cb[data-val="'+(d[c].examName||"")+'"]'));for(var g=0,h=d[c].subjects||[],i=h.length;i>g;g++)b.find('.cb[data-val="'+h[g]+'"]').prop("checked",!0)}for(c=0,d=$('[data-fltr-type="examSubjMap"]:not(:checked)'),e=d.length;e>c;c++)q($(d[c]))},t=function(a){var c=null,d=0,e=[],f=0;for(var g in a)if(c=$('[data-fltr="'+g+'"]').show(),"city"===g)for(d=0,e=a[g],f=e.length;f>d;d++)c.find(".checkbox-combo").append('<div class="ellipsis"><input id="city-'+d+'" type="checkbox" class="cb" data-val="'+e[d]._id+'" data-fltr-type="city" data-ineligible="0"><label for="city-'+d+'" class="lbl-cb"><span></span> '+e[d]._id+"</label></div>");else if("examSubjMap"===g)for(d=0,e=a[g]||[],f=e.length;f>d;d++){c.find(".checkbox-combo").append('<div class="ellipsis"><input id="exm-'+d+'" type="checkbox" class="cb js-exm" data-val="'+e[d].examName+'" data-subjs="#subj-'+d+'" data-fltr-type="examSubjMap" data-ineligible="0"><label for="exm-'+d+'" class="lbl-cb" title="'+e[d].examNameAlt+'"><span></span> '+e[d].examName+"</label></div>"),c.find(".checkbox-combo div:eq("+d+")").append('<ul id="subj-'+d+'" style="display: none"></ul>');for(var h=0,i=e[d].subjects||[],j=i.length;j>h;h++)$("#subj-"+d).append('<li class="ellipsis"><input id="subj-'+d+"-"+h+'" type="checkbox" class="cb" data-val="'+i[h]+'" data-parent="'+e[d].examName+'" data-fltr-type="subject"><label for="subj-'+d+"-"+h+'" class="lbl-cb" title="'+i[h]+'"><span></span> '+i[h]+"</label></li>")}else if("courseType"===g)for(d=0,e=a[g],f=e.length;f>d;d++)c.find(".checkbox-combo").append('<div class="ellipsis"><input id="crse-type-'+d+'" type="checkbox" class="cb" data-val="'+e[d]._id+'" data-fltr-type="courseType" data-ineligible="0"><label for="crse-type-'+d+'" class="lbl-cb"><span></span> '+b[e[d]._id-1]+"</label></div>");else if("instName"===g)for(d=0,e=a[g],f=e.length;f>d;d++)c.find(".checkbox-combo").append('<div class="ellipsis"><input id="inst-'+d+'" type="checkbox" class="cb" data-val="'+e[d]._id+'" data-fltr-type="instName" data-ineligible="0"><label for="inst-'+d+'" class="lbl-cb" title="'+e[d]._id+'"><span></span> '+e[d]._id+"</label></div>");else"duration"===g&&(c.find(".slidr").attr({min:parseInt(a[g].min/24),max:parseInt(a[g].max/24)}).data({"fltr-type":"duration"}).val(parseInt(a[g].max/24)),$("#dur-min").text(parseInt(a[g].min/24)),$("#dur-max").text(parseInt(a[g].max/24)),r(c.find(".slidr")))},u=function(a){var b=a.data("fltr-type"),d=a.data("val")||a.val(),e=a.data("parent"),f=a.is(":checked");if(b)if("city"===b||"instName"===b)f?(c[b]||(c[b]=[]),c[b].push(d)):(c[b].splice(c[b].indexOf(d),1),c[b].length||(c[b]=null));else if("courseType"===b)f?(c[b]||(c[b]=[]),c[b].push(parseInt(d))):(c[b].splice(c[b].indexOf(parseInt(d)),1),c[b].length||(c[b]=null));else if("examSubjMap"===b)if(f)c[b]||(c[b]=[]),c[b].push({examName:d});else{var g=p(c[b],d);(g||0===g)&&(c[b].splice(g,1),c[b].length||(c[b]=null))}else if("subject"===b){for(var h=0,i=c.examSubjMap||[],j=i.length;j>h;h++)if(i[h].examName===e){f?(i[h].subjects||(i[h].subjects=[]),i[h].subjects.push(d)):(i[h].subjects.splice(i[h].subjects.indexOf(d),1),i[h].subjects.length||(i[h].subjects=null));break}}else"duration"===b&&(d=parseInt(d),c.duration||(c.duration={}),0===d?c.duration=null:(c.duration.min=24*parseInt(a.attr("min")),c.duration.max=24*d))},v=function(a){var b=null,c=0,d=[],e=0;for(var f in a)if(b=$('[data-fltr="'+f+'"]'),"city"===f||"instName"===f||"courseType"===f)for(c=0,d=b.find(".cb"),e=d.length;e>c;c++)o($(d[c]).data("val"),a[f],"_id")?$(d[c]).prop("disabled",!1).attr("data-ineligible","0"):($(d[c]).is(":checked")&&($(d[c]).prop("checked",!1),u($(d[c]))),$(d[c]).prop("disabled",!0).attr("data-ineligible","1"));else if("examSubjMap"===f){for(c=0,d=b.find('.cb[data-fltr-type="examSubjMap"]'),e=d.length;e>c;c++)o($(d[c]).data("val"),a[f],"examName")||($(d[c]).prop({disabled:!0,checked:!1}).attr("data-ineligible","1"),u($(d[c])),q($(d[c])));for(c=0,d=a[f]||[],e=d.length;e>c;c++)b.find('.cb[data-val="'+d[c].examName+'"]').prop("disabled",!1).attr("data-ineligible","0")}else if("duration"===f){var g=parseInt((a[f]||{}).min/24),h=parseInt((a[f]||{}).max/24);if(console.log("Eligible duration hash:",a[f]),!a[f]||a[f].min!==a[f].max&&a[f].max)b.show().attr({min:g,max:h}),$("#dur-min").text(g),$("#dur-max").text(h),parseInt(b.find(".slidr").val())>h&&(b.find(".slidr").val(h),r(b.find(".slidr"))),u(b.find(".slidr"));else{b.hide();var i=b.find(".slidr").val();b.find(".slidr").val(0),u(b.find(".slidr")),b.find(".slidr").val(i),r(b.find(".slidr"))}}for(c=0,d=$(".checkbox-combo"),e=d.length;e>c;c++){var j="#"+$(d[c]).attr("id")+" > div";$(j).length&&tinysort(j,{selector:"input",data:"ineligible"},"label")}},w=function(b,c){h.fadeOut("fast"),l.hide(),c||$(".js-srch-results").html(""),(b||[]).length<a&&(j.fadeIn(),n=!1);for(var d=0,e=(b||[]).length;e>d;d++){Pluto.Templates.renderTemplate(g,b[d],".js-srch-results");var f=$(".srch-result-crse").last();if(f.length){var i=f.find(".js-entity-share");i.attr("href",i.data("owner")+"/"+i.attr("href"));var o=f.find(".js-banner");o.attr("href",o.attr("href").split("../")[1])}}$("img.lazy").lazyload({effect:"fadeIn",placeholder:"assets/img/loading-tiny.gif",load:function(){$(this).removeClass("lazy")}}),k.hide(),m=!1},x=function(b){var e={};if(m||l.show(),n=!0,m=!0,j.hide(),b?(d+=a,k.fadeIn()):(d=0,h.show()),e.skip=d,e.limit=a,e.filters=c,$("body").data("init")){var g=JSON.stringify(e);console.log("Filter sent:"+g),$.post(f+"/filter",g).done(function(a){console.log("Response from server:",a),(200===a.status||"OK"===a.status)&&(a.title&&(document.title=a.title.trim()+" | "+document.title.split("|").pop()),a.meta&&a.meta.description&&$('meta[name="description"]').attr("content",a.meta.description),v(a.elligibleFilters),w(a.result,b))}).error(function(){console.log("An error occurred while fetching results")})}else c=JSON.parse(getParameterByName("filters")||"{}").filters||{},t(JSON.parse(initFltrs||eligibleFltrs||"{}")),s(c),v(JSON.parse(eligibleFltrs||"{}")),w(JSON.parse(result||"[]")),$("body").data("init",!0)},y=function(a){for(var b in a)if(!a[b])try{delete a[b]}catch(c){console.error("Exception occurred while deleting a key from JSON:",c)}};$(document).on("change",".js-exm",function(){q($(this))}),$(document).on("change",".slidr",function(){r($(this))}),$(document).on("change",".cb, .slidr",function(){u($(this)),y(c),history.pushState(null,null,"filter?type="+e+($.isEmptyObject(c)?"":'&filters={"filters":'+JSON.stringify(c)+"}")),console.log("Filters:",c),x()}),$(window).on("scroll",function(){if($(window).scrollTop()+$(window).height()>=$(document).height()-i.outerHeight(!0)){if(m||!n)return;x(!0)}}),$(window).on("popstate",function(){c=JSON.parse(getParameterByName("filters")||"{}").filters||{},s(c),x()}),x()}});